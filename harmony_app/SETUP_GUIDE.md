# é¸¿è’™Appå¼€å‘ç¯å¢ƒé…ç½®æŒ‡å—

## ğŸ“‹ å‰ç½®è¦æ±‚

1. **DevEco Studio 4.0+**
   - ä¸‹è½½åœ°å€: https://developer.harmonyos.com/cn/develop/deveco-studio
   - æ”¯æŒ: Windows / macOS / Linux

2. **HarmonyOS SDK API 9+**
   - åœ¨DevEco Studioä¸­è‡ªåŠ¨ä¸‹è½½

3. **æµ‹è¯•è®¾å¤‡**
   - HarmonyOSçœŸæœº æˆ–
   - HarmonyOSæ¨¡æ‹Ÿå™¨

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ­¥éª¤1: åˆ›å»ºé¡¹ç›®

1. æ‰“å¼€DevEco Studio
2. File > New > Create Project
3. é€‰æ‹©æ¨¡æ¿: **Empty Ability**
4. å¡«å†™é¡¹ç›®ä¿¡æ¯:
   - Project name: `FamilyEmotionApp`
   - Bundle name: `com.family.emotion`
   - Save location: é€‰æ‹©ä½ æƒ³ä¿å­˜çš„ä½ç½®
   - Compile SDK: `API 9`
   - Model: `Stage`

### æ­¥éª¤2: å¤åˆ¶ä»£ç æ–‡ä»¶

å°†`harmony_app/entry/src/main/ets/`ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶å¤åˆ¶åˆ°æ–°é¡¹ç›®çš„å¯¹åº”ç›®å½•:

```bash
# ä»æœ¬é¡¹ç›®å¤åˆ¶åˆ°DevEco Studioé¡¹ç›®
cp -r harmony_app/entry/src/main/ets/* [ä½ çš„DevEcoé¡¹ç›®]/entry/src/main/ets/
```

### æ­¥éª¤3: é…ç½®é¡µé¢è·¯ç”±

åœ¨DevEco Studioé¡¹ç›®ä¸­,æ‰¾åˆ° `entry/src/main/resources/base/profile/main_pages.json`,æ·»åŠ é¡µé¢è·¯ç”±:

```json
{
  "src": [
    "pages/Index",
    "pages/Home", 
    "pages/FaceRegister",
    "pages/Checkin",
    "pages/History"
  ]
}
```

### æ­¥éª¤4: é…ç½®APIåœ°å€

ç¼–è¾‘ `entry/src/main/ets/common/constants/AppConstants.ets`:

```typescript
// ä¿®æ”¹ä¸ºä½ çš„åç«¯æœåŠ¡å™¨åœ°å€
export const API_BASE_URL = 'http://ä½ çš„ç”µè„‘IP:8000'

// ä¾‹å¦‚:
// export const API_BASE_URL = 'http://192.168.1.100:8000'
```

**æ³¨æ„**: 
- ä¸è¦ä½¿ç”¨ `localhost` æˆ– `127.0.0.1`
- ä½¿ç”¨å±€åŸŸç½‘IPåœ°å€,ç¡®ä¿æ‰‹æœº/æ¨¡æ‹Ÿå™¨èƒ½è®¿é—®
- æŸ¥çœ‹IP: macOS/Linuxç”¨`ifconfig`, Windowsç”¨`ipconfig`

### æ­¥éª¤5: å¤åˆ¶é…ç½®æ–‡ä»¶

å¤åˆ¶ä»¥ä¸‹é…ç½®æ–‡ä»¶åˆ°é¡¹ç›®æ ¹ç›®å½•:

```bash
# å¤åˆ¶module.json5
cp harmony_app/entry/src/main/module.json5 [ä½ çš„DevEcoé¡¹ç›®]/entry/src/main/module.json5

# å¤åˆ¶build-profile.json5
cp harmony_app/build-profile.json5 [ä½ çš„DevEcoé¡¹ç›®]/build-profile.json5
```

### æ­¥éª¤6: æ·»åŠ èµ„æºæ–‡ä»¶

åœ¨ `entry/src/main/resources/base/` ç›®å½•ä¸‹éœ€è¦æ·»åŠ ä»¥ä¸‹å ä½å›¾æ ‡:

1. `media/app_icon.png` - åº”ç”¨å›¾æ ‡
2. `media/default_avatar.png` - é»˜è®¤å¤´åƒ
3. `media/face_guide.png` - äººè„¸æ³¨å†Œå¼•å¯¼å›¾
4. `media/checkin_icon.png` - æ‰“å¡å›¾æ ‡
5. `media/history_icon.png` - å†å²è®°å½•å›¾æ ‡
6. `media/face_icon.png` - äººè„¸ç®¡ç†å›¾æ ‡
7. `media/back.png` - è¿”å›æŒ‰é’®å›¾æ ‡
8. `media/empty.png` - ç©ºçŠ¶æ€å›¾æ ‡

**æç¤º**: å¯ä»¥å…ˆä½¿ç”¨ç®€å•çš„çº¯è‰²æ–¹å—å›¾ç‰‡ä½œä¸ºå ä½,åç»­æ›¿æ¢ä¸ºè®¾è®¡å›¾ã€‚

### æ­¥éª¤7: å¯åŠ¨åç«¯æœåŠ¡

```bash
cd /Users/xiangbingzhou/nan/family-emotion-system
source venv/bin/activate
python manage.py runserver 0.0.0.0:8000
```

### æ­¥éª¤8: è¿è¡ŒApp

1. è¿æ¥HarmonyOSè®¾å¤‡æˆ–å¯åŠ¨æ¨¡æ‹Ÿå™¨
2. åœ¨DevEco Studioä¸­ç‚¹å‡» **Run** æŒ‰é’®(ç»¿è‰²ä¸‰è§’å½¢)
3. ç­‰å¾…ç¼–è¯‘å’Œå®‰è£…
4. Appå°†è‡ªåŠ¨å¯åŠ¨

## ğŸ§ª æµ‹è¯•æµç¨‹

### 1. å‡†å¤‡æµ‹è¯•æ•°æ®

**åœ¨Webç®¡ç†ç•Œé¢:**
1. è®¿é—® http://localhost:8000/admin/
2. åˆ›å»ºè¶…çº§ç®¡ç†å‘˜è´¦å·
3. åˆ›å»ºä¸€ä¸ªå®¶åº­
4. åˆ›å»ºå®¶åº­ç®¡ç†å‘˜ç”¨æˆ·
5. ä½¿ç”¨å®¶åº­ç®¡ç†å‘˜ç™»å½•
6. è¿›å…¥"é‚€è¯·ç ç®¡ç†"
7. å¡«å†™æˆå‘˜å§“åç”Ÿæˆé‚€è¯·ç (ä¾‹å¦‚: ABC12345)

### 2. æµ‹è¯•é‚€è¯·ç ç™»å½•

1. æ‰“å¼€é¸¿è’™App
2. è¾“å…¥é‚€è¯·ç : `ABC12345`
3. ç‚¹å‡»"ç™»å½•"
4. éªŒè¯æç¤º: "æ¬¢è¿,xxx!"
5. åº”è¯¥è·³è½¬åˆ°äººè„¸æ³¨å†Œé¡µé¢

### 3. æµ‹è¯•äººè„¸æ³¨å†Œ

1. ç‚¹å‡»"å¼€å§‹æ‹ç…§"
2. å…è®¸ç›¸æœºæƒé™
3. æ‹æ‘„äººè„¸ç…§ç‰‡
4. ç‚¹å‡»"ç¡®è®¤ä¸Šä¼ "
5. ç­‰å¾…æ³¨å†ŒæˆåŠŸ
6. åº”è¯¥è·³è½¬åˆ°ä¸»é¡µ

### 4. æµ‹è¯•æ‰“å¡åŠŸèƒ½

**å…ˆåœ¨Webåˆ›å»ºæ‰“å¡ä»»åŠ¡:**
1. å®¶åº­ç®¡ç†å‘˜ç™»å½•Web
2. è¿›å…¥"æ‰“å¡ç®¡ç†" > "åˆ›å»ºä»»åŠ¡"
3. å¡«å†™ä»»åŠ¡åç§°,é€‰æ‹©æˆå‘˜
4. ä¿å­˜ä»»åŠ¡

**é¸¿è’™Appæµ‹è¯•:**
1. åœ¨ä¸»é¡µç‚¹å‡»"å¼€å§‹æ‰“å¡"
2. æŸ¥çœ‹ä»»åŠ¡ä¿¡æ¯
3. ç‚¹å‡»"å¼€å§‹æ‰“å¡"
4. æ‹ç…§å®Œæˆæ‰“å¡
5. æŸ¥çœ‹æ‰“å¡ç»“æœ(çŠ¶æ€ã€æƒ…ç»ª)

### 5. æµ‹è¯•å†å²è®°å½•

1. ç‚¹å‡»"å†å²è®°å½•"
2. æŸ¥çœ‹æ‰“å¡è®°å½•åˆ—è¡¨
3. æµ‹è¯•ä¸‹æ‹‰åˆ·æ–°
4. æµ‹è¯•ä¸Šæ‹‰åŠ è½½æ›´å¤š

## âš ï¸ å¸¸è§é—®é¢˜

### 1. ç½‘ç»œè¿æ¥å¤±è´¥

**é—®é¢˜**: Appæ˜¾ç¤º"ç½‘ç»œè¿æ¥å¤±è´¥"

**è§£å†³**:
- æ£€æŸ¥åç«¯æ˜¯å¦å¯åŠ¨: `curl http://ä½ çš„IP:8000/api/v1/auth/invite-login/`
- æ£€æŸ¥é˜²ç«å¢™æ˜¯å¦å…è®¸8000ç«¯å£
- ç¡®ä¿æ‰‹æœºå’Œç”µè„‘åœ¨åŒä¸€WiFiç½‘ç»œ
- æ£€æŸ¥AppConstants.etsä¸­çš„IPåœ°å€æ˜¯å¦æ­£ç¡®

### 2. é‚€è¯·ç æ— æ•ˆ

**é—®é¢˜**: è¾“å…¥é‚€è¯·ç åæç¤º"é‚€è¯·ç å°šæœªæ¿€æ´»"

**åŸå› **: é‚€è¯·ç ç”Ÿæˆæµç¨‹å·²ä¿®æ”¹,ç°åœ¨ç”Ÿæˆé‚€è¯·ç æ—¶è‡ªåŠ¨åˆ›å»ºç”¨æˆ·

**è§£å†³**: ç¡®ä¿ä½¿ç”¨æ–°æµç¨‹ç”Ÿæˆçš„é‚€è¯·ç (ç®¡ç†å‘˜åªå¡«å†™æˆå‘˜å§“å)

### 3. ç›¸æœºæƒé™è¢«æ‹’ç»

**é—®é¢˜**: æ‹ç…§æ—¶æç¤ºæƒé™è¢«æ‹’ç»

**è§£å†³**:
- åœ¨è®¾å¤‡"è®¾ç½®" > "åº”ç”¨" > "FamilyEmotionApp"ä¸­æˆäºˆç›¸æœºæƒé™
- å¸è½½é‡è£…App,åœ¨é¦–æ¬¡å¯åŠ¨æ—¶æˆäºˆæƒé™

### 4. ç¼–è¯‘é”™è¯¯

**é—®é¢˜**: DevEco Studioç¼–è¯‘å¤±è´¥

**è§£å†³**:
- æ£€æŸ¥SDKç‰ˆæœ¬æ˜¯å¦ä¸ºAPI 9+
- Build > Clean Project
- Build > Rebuild Project
- æ£€æŸ¥æ‰€æœ‰.etsæ–‡ä»¶è¯­æ³•æ˜¯å¦æ­£ç¡®

### 5. å›¾ç‰‡èµ„æºæ‰¾ä¸åˆ°

**é—®é¢˜**: è¿è¡Œæ—¶å›¾æ ‡ä¸æ˜¾ç¤º

**è§£å†³**:
- åœ¨`entry/src/main/resources/base/media/`ç›®å½•æ·»åŠ å ä½å›¾ç‰‡
- æˆ–ä¿®æ”¹ä»£ç ä¸­çš„`$r('app.media.xxx')`å¼•ç”¨

## ğŸ“± æƒé™è¯´æ˜

Appéœ€è¦ä»¥ä¸‹æƒé™:

1. **ohos.permission.INTERNET** - ç½‘ç»œè®¿é—®
   - ç”¨é€”: è°ƒç”¨åç«¯API

2. **ohos.permission.CAMERA** - ç›¸æœºæƒé™
   - ç”¨é€”: äººè„¸æ³¨å†Œå’Œæ‰“å¡æ‹ç…§

3. **ohos.permission.READ_MEDIA** - è¯»å–åª’ä½“
   - ç”¨é€”: è¯»å–ç›¸æœºæ‹æ‘„çš„ç…§ç‰‡

4. **ohos.permission.WRITE_MEDIA** - å†™å…¥åª’ä½“  
   - ç”¨é€”: ä¿å­˜ç…§ç‰‡ä¸´æ—¶æ–‡ä»¶

## ğŸ”§ å¼€å‘å·¥å…·

### 1. æ—¥å¿—æŸ¥çœ‹

åœ¨DevEco Studioåº•éƒ¨çš„"Log"çª—å£æŸ¥çœ‹è¿è¡Œæ—¥å¿—:

```typescript
console.info('[Tag] Info message')  // æ™®é€šä¿¡æ¯
console.error('[Tag] Error message')  // é”™è¯¯ä¿¡æ¯
```

### 2. è°ƒè¯•

- ä½¿ç”¨æ–­ç‚¹è°ƒè¯•
- æŸ¥çœ‹å˜é‡å€¼
- å•æ­¥æ‰§è¡Œ

### 3. é¢„è§ˆå™¨

DevEco Studioè‡ªå¸¦é¢„è§ˆå™¨,å¯ä»¥å®æ—¶æŸ¥çœ‹UIå˜åŒ–

## ğŸ“š å‚è€ƒæ–‡æ¡£

- [HarmonyOSå¼€å‘æ–‡æ¡£](https://developer.harmonyos.com/cn/docs)
- [ArkTSè¯­æ³•](https://developer.harmonyos.com/cn/docs/documentation/doc-guides-V3/arkts-overview-0000001531611153-V3)
- [ç›¸æœºå¼€å‘](https://developer.harmonyos.com/cn/docs/documentation/doc-references-V3/js-apis-camera-0000001478181433-V3)

## ğŸ¯ ä¸‹ä¸€æ­¥

- æ·»åŠ æ¶ˆæ¯é€šçŸ¥åŠŸèƒ½
- æ·»åŠ æƒ…ç»ªç»Ÿè®¡å›¾è¡¨
- ä¼˜åŒ–UIè®¾è®¡
- æ·»åŠ ç¦»çº¿ç¼“å­˜
- æ€§èƒ½ä¼˜åŒ–

## ğŸ’¡ æç¤º

- å¼€å‘è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜,å…ˆæŸ¥çœ‹DevEco Studioçš„æ—¥å¿—
- ä½¿ç”¨çœŸæœºæµ‹è¯•ç›¸æœºåŠŸèƒ½(æ¨¡æ‹Ÿå™¨å¯èƒ½ä¸æ”¯æŒç›¸æœº)
- å®šæœŸä¿å­˜ä»£ç 
- Gitç‰ˆæœ¬ç®¡ç†

ç¥å¼€å‘é¡ºåˆ©! ğŸ‰